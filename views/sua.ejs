     
           <% include layout/header.ejs %> 
           <header class="masthead" style="background-image: url('img/contact-bg.jpg')">
            <div class="overlay"></div>
            <div class="container">
              <div class="row">
                <div class="col-lg-8 col-md-10 mx-auto">
                  <div class="site-heading">
                    <h1>Edit Post</h1>
                    <span class="subheading">Sửa Bài Viết</span>
                  </div>
                </div>
              </div>
            </div>
          </header>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 col-md-10 mx-auto">        
                <form method="post" action="/sua" novalidate enctype="multipart/form-data">
                  <div class="control-group">
                    <div class="form-group floating-label-form-group controls"> <label>Tác giả</label>
                      <input name="username" type="text" class="form-control" placeholder="Tác giả" required data-validation-required-message="Nhập tên tác giả" value="<%= data.username %>">
                      <p class="help-block text-danger"></p>
                    </div>
                  </div>
                  <div class="control-group">
                    <div class="form-group floating-label-form-group controls"> <label>Tiêu đề</label>
                      <input name="title" type="text" class="form-control" placeholder="Tiêu đề" required data-validation-required-message="Vui lòng nhập tiêu đề" value="<%= data.title %>">
                      <p class="help-block text-danger"></p>
                    </div>
                  </div>
                  <div class="control-group">
                    <div class="form-group floating-label-form-group controls"> <label>Tiêu đề phụ</label>
                      <input name="subtitle"  type="text" class="form-control" placeholder="Tiêu đề phụ" required data-validation-required-message="Vui lòng nhập tiêu đề phụ" value="<%= data.subtitle %>">
                      <p class="help-block text-danger"></p>
                    </div>
                  </div>
                  <div class="control-group">
                    <div class="form-group floating-label-form-group controls"> <label>Nội dung</label>
                      <textarea name="content"  rows="5" class="form-control" placeholder="Nội dung" id="message" required data-validation-required-message="Vui lòng nhập nội dung" value="<%= data.content %>">
                      </textarea> <p class="help-block text-danger"></p>
                    </div>
                  </div>
                  <% if (data.image) { %> 
                    <img src="/posts/<%= data.image %>" alt="" width="20%">    
                <% }else{ %>
                  <img src="/posts/noimage.jpg" alt="." width="30%">
                <% } %> 
                  <div class="control-group">
                    <div class="form-group floating-label-form-group controls"> <label>Hình ảnh</label>
                      <input name="image" type="file" class="form-control" required>
                      <p class="help-block text-danger"></p>
                    </div>
                    <input type="hidden" name="maso" value="<%= data._id %>">
                  </div>
                  <br> <div id="success"></div>
                  <button type="submit" class="btn btn-primary">Lưu</button>
                </form>
              </div>
            </div>
          </div>
        <br><br>
        <script>
            var myform = document.querySelector('form')
            myform.addEventListener('submit', hoitruockhiluu)
            function hoitruockhiluu(e){
              e.preventDefault()
              Swal.fire({
title: 'Do you want to save the changes?',
showDenyButton: true,
confirmButtonText: 'Save',
denyButtonText: `Don't save`,
}).then((result) => {
/* Read more about isConfirmed, isDenied below */
if (result.isConfirmed) {
Swal.fire('Saved!', '', 'success')
  .then(()=> myform.submit())
} else if (result.isDenied) {
Swal.fire('Changes are not saved', '', 'info')
}
})
            }
          </script>
             

                <% include layout/footer.ejs %> 